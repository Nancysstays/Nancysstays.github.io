<!DOCTYPE html>
<html>
<head>
  <title>Cartesian Plot with CRUD</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>

  <div id="plot"></div>

  <h2>Add Line</h2>
  X: <input type="text" id="xInput" placeholder="Enter x values (comma-separated)"> 
  Y: <input type="text" id="yInput" placeholder="Enter y values (comma-separated)"> 
  Color: <input type="color" id="colorInput" value="#007bff"> 
  <br>
  X-Axis Range: <input type="text" id="xRangeInput" placeholder="e.g., 0, 10">
  Y-Axis Range: <input type="text" id="yRangeInput" placeholder="e.g., -5, 5">
  <br>
  <button onclick="addLine()">Add Line</button>

  <h2>Lines</h2>
  <ul id="lineList"></ul>

  <script>
    let data = []; 
    let counter = 1; 

    Plotly.newPlot('plot', data);

    function addLine() {
      let xStr = document.getElementById('xInput').value;
      let yStr = document.getElementById('yInput').value;
      let color = document.getElementById('colorInput').value;
      let xRangeStr = document.getElementById('xRangeInput').value;
      let yRangeStr = document.getElementById('yRangeInput').value;

      if (!xStr || !yStr) {
        alert("Please enter x and y values.");
        return;
      }

      let xValues = xStr.split(',').map(Number);
      let yValues = yStr.split(',').map(Number);

      let newLine = {
        x: xValues,
        y: yValues,
        type: 'scatter',
        mode: 'lines+markers',
        name: 'Line ' + counter,
        line: {
          color: color, 
          shape: 'linear' 
        }
      };

      let layout = {}; 

      if (xRangeStr) {
        let xRange = xRangeStr.split(',').map(Number);
        layout.xaxis = { range: xRange };
      }

      if (yRangeStr) {
        let yRange = yRangeStr.split(',').map(Number);
        layout.yaxis = { range: yRange };
      }

      data.push(newLine);
      counter++;

      Plotly.react('plot', data, layout); 

      addLineToList(newLine);

      document.getElementById('xInput').value = '';
      document.getElementById('yInput').value = '';
    }

    // ... (rest of your code - addLineToList, editLine, deleteLine) ... 
  </script>

</body>
</html>
