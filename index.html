<!DOCTYPE html>
<html>
<head>
  <title>Hotel Search</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
  <style>
    /* You can add custom styles here if needed */
    #map {
      height: 400px; 
      width: 100%;
    }
  </style>
</head>
<body>
  <div class="container mt-5">
    <h1>Hotel Search</h1>
    <input id="autocomplete" class="form-control" type="text" placeholder="Enter hotel name">
    <div id="map"></div> 
  </div>

  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&libraries=places">
  </script> 
  <script>
    function initMap() {
      const map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: 37.7749, lng: -122.4194 }, // Default center (San Francisco)
        zoom: 13, 
      });

      const input = document.getElementById("autocomplete");
      const autocomplete = new google.maps.places.Autocomplete(input);
      autocomplete.bindTo("bounds", map);

      let infowindow = new google.maps.InfoWindow();
      let marker = new google.maps.Marker({
        map,
        anchorPoint: new google.maps.Point(0, -29), 
      });

      autocomplete.addListener("place_changed", () => {
        infowindow.close();
        marker.setVisible(false);

        const place = autocomplete.getPlace();

        if (!place.geometry || !place.geometry.location) {
          window.alert("No details available for input: '" + place.name + "'");
          return;
        }

        // If the place has a geometry, then present it on a map.
        if (place.geometry.viewport) {
          map.fitBounds(place.geometry.viewport);
        } else {
          map.setCenter(place.geometry.location);
          map.setZoom(17); 
        }

        marker.setPosition(place.geometry.location);
        marker.setVisible(true);

        let address = "";
        if (place.address_components) {
          address = [
            (place.address_components[0] &&
              place.address_components[0].short_name) ||
            "",
            (place.address_components[1] &&
              place.address_components[1].short_name) ||
            "",
            (place.address_components[2] &&
              place.address_components[2].short_name) ||
            "",
          ].join(" ");
        }

        // Construct the infowindow content with the Expedia link
        infowindow.setContent(
          '<div><strong>' +
            place.name +
            '</strong><br>' +
            address +
            '<br><a href="https://expedia.com/affiliate/XhR7pks?hotel=' +
            encodeURIComponent(place.name) + 
            '" target="_blank">Book on Expedia</a></div>'
        );
        infowindow.open(map, marker);
      });
    }

    window.initMap = initMap;
  </script>
</body>
</html>
