<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Search</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
<link href="style.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFOnpD lijXk8vDp7+Jc9XBLPtFBwtSJ7zIW3YfA9OMX4zWCX0b41SXdxjBl" crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<script>
$(document).ready(function() {
    // Increase the button's font size on smaller screens
    if ($(window).width() < 768) {
        $("#hotelSearchForm button").css("font-size", "14px");
    }
});
</script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/gsap.min.js"></script>
    <style>
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-image: url("../1733349677562.jpg"); /* Set your background image path */
            background-size: cover;
            background-position: center;
        }

        .search-form {
            background-color: #fff;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
            transform: translateY(-100%); /* Initial position off-screen */
            transition: transform 0.5s ease-in-out;
        }

        .search-form h1 {
            text-align: center;
            margin-bottom: 30px;
        }

        .search-form.active {
            transform: translateY(0); /* Animate form to center of screen */
        }

        .search-form .form-group {
            margin-bottom: 20px;
        }
    </style>
</head>

<body>
    <div class="search-form">
        <h1>Hotel Search</h1>
        <form id="hotelSearchForm">
            <div class="form-group">
                <label for="destination">Destination:</label>
                <input type="text" class="form-control" id="destination" name="destination"
                    placeholder="Enter city, state, or country">
            </div>
            <div class="form-group">
                <label for="checkInDate">Check-in Date:</label>
                <input type="date" class="form-control" id="checkInDate" name="checkInDate">
            </div>
            <div class="form-group">
                <label for="checkOutDate">Check-out Date:</label>
                <input type="date" class="form-control" id="checkOutDate" name="checkOutDate">
            </div>
            <div class="form-group">
                <label for="guests">Guests:</label>
                <select class="form-select" id="guests" name="guests">
                    <option selected value="2">2 Adults</option>
                    <option value="3">3 Adults</option>
                    <option value="4">4 Adults</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary btn-block">Search Expedia</button>
        </form>
    </div>

    <script>
        // Get user's location
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }

        function showPosition(position) {
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;

            // Use a geocoding API to get city, state, and country
            $.ajax({
                url: `https://api.opencagedata.com/geocode/v1/json?q=${latitude}+${longitude}&key=bd5bf5f7af774654843e7447041e6f72`,
                success: function(response) {
                    var city = response.results[0].components.city;
                    var state = response.results[0].components.state;
                    var country = response.results[0].components.country;

                    // Set the destination input field
                    $('#destination').val(`${city}, ${state}, ${country}`);

                    // Set the check-in and check-out dates
                    var today = new Date();
                    var checkInDate = new Date(today.getTime() + 3 * 24 * 60 * 60 * 1000);
                    var checkOutDate = new Date(today.getTime() + 6 * 24 * 60 * 60 * 1000);

                    $('#checkInDate').val(checkInDate.toISOString().split('T')[0]);
                    $('#checkOutDate').val(checkOutDate.toISOString().split('T')[0]);

                    // Check if user data is stored in local storage
                    var storedDestination = localStorage.getItem('destination');
                    if (storedDestination) {
                        $('#destination').val(storedDestination);
                    }
                }
            });
        }

        getLocation();

        // Form submission handler (avoid scraping or directly linking to Expedia results)
        const form = document.getElementById('hotelSearchForm');
        form.addEventListener('submit', (event) => {
            event.preventDefault(); // Prevent default form submission

            // Display a message to the user, informing them that they will be redirected to Expedia
            alert('You will be redirected to Expedia to view hotel search results.');

            // Store user input in local storage
            localStorage.setItem('destination', $('#destination').val());

            // Redirect the user to the Expedia user input version of the site
            const destination = document.getElementById('destination').value;
            const checkInDate = document.getElementById('checkInDate').value;
            const checkOutDate = document.getElementById('checkOutDate').value;
            const guests = document.getElementById('guests').value;

            const expediaUrl = `https://www.expedia.com/Hotel-Search?destination=${encodeURIComponent(destination)}&flexibility=0_DAY&d1=${checkInDate}&startDate=${checkInDate}&d2=${checkOutDate}&endDate=${checkOutDate}&adults=${guests}&rooms=1&theme=&userIntent=&semdtl=&useRewards=true&sort=RECOMMENDED`;

            window.location.href = expediaUrl;
        });

        // Parallax effect and form animation
        gsap.fromTo(".search-form", { y: 100, opacity: 0 }, { y: 0, opacity: 1, duration: 1 });
    </script>
</body>

</html>
